# Regression Test TaskList
## Vibe Text Editor - 한국 QA 회귀 테스트

### 테스트 환경 설정
- [ ] Chrome 최신 버전에서 테스트
- [ ] Safari 최신 버전에서 테스트
- [ ] Firefox 최신 버전에서 테스트
- [ ] 개발자 도구 콘솔에서 에러 없음 확인
- [ ] Debug Inspector가 우하단에 정상 표시됨 확인

## 1. 기본 마우스 클릭 테스트

### 1.1 일반 텍스트 클릭
- [ ] 문단 내 임의의 위치 클릭 시 정확한 위치에 커서 배치
- [ ] 텍스트 중간 클릭 시 해당 글자 앞에 커서 배치
- [ ] 줄 끝 클릭 시 줄 끝에 커서 배치
- [ ] 빈 줄 클릭 시 해당 줄에 커서 배치

### 1.2 인라인 요소 클릭
- [ ] `<b>` 태그 내 텍스트 클릭 시 정상 커서 배치
- [ ] `<i>` 태그 내 텍스트 클릭 시 정상 커서 배치
- [ ] `<code>` 태그 내 텍스트 클릭 시 정상 커서 배치

### 1.3 패딩 영역 클릭 (폴백 테스트)
- [ ] 문단 오른쪽 빈 공간 클릭 시 해당 문단 끝으로 커서 이동
- [ ] 에디터 하단 패딩 클릭 시 마지막 텍스트 끝으로 커서 이동
- [ ] 블록 요소 아래 빈 공간 클릭 시 해당 블록 끝으로 커서 이동

## 2. Atomic Component 테스트

### 2.1 멘션(@user) 클릭
- [ ] @john_doe 멘션 왼쪽 절반 클릭 시 멘션 앞에 커서 배치 (offset: 0)
- [ ] @john_doe 멘션 오른쪽 절반 클릭 시 멘션 뒤에 커서 배치 (offset: 1)
- [ ] @alice_dev 멘션 클릭 시 동일한 동작 확인
- [ ] @bob_designer 멘션 클릭 시 동일한 동작 확인

### 2.2 테이블 클릭
- [ ] 테이블 왼쪽 절반 클릭 시 테이블 앞에 커서 배치 (offset: 0)
- [ ] 테이블 오른쪽 절반 클릭 시 테이블 뒤에 커서 배치 (offset: 1)
- [ ] 테이블 내부 텍스트 클릭해도 테이블 경계에만 커서 배치됨 확인

## 3. 키보드 네비게이션 테스트

### 3.1 좌우 방향키 (통합된 가로 이동 로직)
- [ ] 일반 텍스트에서 왼쪽 화살표로 한 글자씩 이동
- [ ] 일반 텍스트에서 오른쪽 화살표로 한 글자씩 이동
- [ ] 인라인 요소(`<b>`, `<i>`) 경계 통과 시 정상 이동
- [ ] 줄 끝에서 오른쪽 화살표로 다음 줄 시작으로 이동
- [ ] 줄 시작에서 왼쪽 화살표로 이전 줄 끝으로 이동
- [ ] **선택 영역 처리**: 선택 영역이 있을 때 좌우 화살표로 선택 경계로 이동
- [ ] **통합된 로직**: moveHorizontally 함수로 좌우 이동 로직 일관성 확보

### 3.2 Atomic Component와 좌우 방향키
- [ ] 멘션 앞(offset: 0)에서 오른쪽 화살표로 멘션 뒤(offset: 1)로 이동
- [ ] 멘션 뒤(offset: 1)에서 왼쪽 화살표로 멘션 앞(offset: 0)으로 이동
- [ ] 멘션 뒤에서 오른쪽 화살표로 다음 텍스트로 이동
- [ ] 멘션 앞에서 왼쪽 화살표로 이전 텍스트로 이동
- [ ] 테이블에서 동일한 동작 패턴 확인

### 3.3 상하 방향키 (새로운 전체 탐색 알고리즘)
- [ ] 긴 줄에서 짧은 줄로 위쪽 화살표 이동 시 x좌표 유지
- [ ] 짧은 줄에서 긴 줄로 아래쪽 화살표 이동 시 x좌표 복원
- [ ] 여러 줄 연속 이동 시 Goal-X 좌표 일관성 유지
- [ ] 텍스트 중간에서 상하 이동 시 적절한 위치 찾기
- [ ] **큰 마진 요소(h1, hr) 건너뛰기**: 마진이 큰 요소 사이에서도 정확한 다음 줄 찾기
- [ ] **라인 감지 정확성**: Y좌표 기반 자동 라인 그룹화로 복잡한 레이아웃에서도 정확한 라인 인식
- [ ] **모든 커서 위치 탐색**: 에디터 내 모든 가능한 커서 위치를 사전 계산하여 정확한 상하 이동

### 3.4 Atomic Component와 상하 방향키 (고도화된 테스트)
- [ ] **테이블 높이 대응**: 큰 테이블에서 아래쪽 이동 시에도 정확한 다음 줄 찾기
- [ ] **테이블에서 텍스트로**: 테이블에서 위/아래 텍스트로 이동 시 Goal-X 기준 최적 위치 선택
- [ ] **연속 Atomic Component**: 멘션→테이블→멘션 등 연속 atomic component 간 이동
- [ ] **Goal-X 정밀도**: atomic component의 offset 0/1 중 Goal-X에 더 가까운 위치 자동 선택
- [ ] **라인 경계 처리**: atomic component가 라인의 시작/끝에 있을 때 정확한 상하 이동
- [ ] **복합 라인**: 텍스트와 atomic component가 혼재된 라인에서의 상하 이동

### 3.5 Home/End 키
- [ ] Home 키로 줄 시작으로 이동
- [ ] End 키로 줄 끝으로 이동
- [ ] Cmd+Home으로 에디터 시작으로 이동 (Mac)
- [ ] Cmd+End로 에디터 끝으로 이동 (Mac)
- [ ] Ctrl+Home/End로 에디터 경계 이동 (Windows)

## 4. 텍스트 선택 테스트

### 4.1 마우스 드래그 선택
- [ ] 왼쪽에서 오른쪽으로 드래그하여 텍스트 선택
- [ ] 오른쪽에서 왼쪽으로 드래그하여 텍스트 선택
- [ ] 여러 줄에 걸친 드래그 선택
- [ ] 선택 중 마우스가 에디터 밖으로 나가도 정상 동작

### 4.2 Shift + 화살표 선택
- [ ] Shift + 좌우 화살표로 글자 단위 선택 확장
- [ ] Shift + 상하 화살표로 줄 단위 선택 확장
- [ ] Shift + Home/End로 줄 경계까지 선택
- [ ] Shift + Cmd+화살표로 에디터 경계까지 선택

### 4.3 멀티 클릭 선택
- [ ] 더블클릭으로 단어 선택
- [ ] 트리플클릭으로 문단 전체 선택
- [ ] Cmd+A로 전체 선택

### 4.4 Atomic Component 선택
- [ ] 멘션을 포함한 텍스트 선택 시 멘션이 단일 단위로 선택됨
- [ ] 테이블을 포함한 텍스트 선택 시 테이블이 단일 단위로 선택됨
- [ ] Shift+클릭으로 atomic component까지 선택 확장

### 4.5 선택 영역 시각화
- [ ] 한 줄 선택 시 단일 사각형 하이라이트
- [ ] 여러 줄 선택 시 3부분 하이라이트 (첫 줄 + 중간 + 마지막 줄)
- [ ] 선택 해제 시 하이라이트 사라짐
- [ ] 커서 이동 시 하이라이트가 커서로 변경됨

## 5. 커서 렌더링 테스트

### 5.1 커서 위치 정확성 (개선된 커서 렌더링)
- [ ] 텍스트 노드에서 커서 높이가 줄 높이와 일치
- [ ] Atomic component에서 커서 높이가 component 높이와 일치
- [ ] 다양한 폰트 크기에서 커서 높이 적응
- [ ] 커서 위치가 텍스트와 정확히 정렬됨
- [ ] **최소 커서 높이**: STANDARD_LINE_HEIGHT(20px) 최소 높이 보장
- [ ] **수직 중앙 정렬**: 작은 요소에서 커서가 수직 중앙에 위치
- [ ] **큰 요소 대응**: 테이블 등 큰 요소에서도 적절한 커서 크기 유지

### 5.2 커서 깜빡임
- [ ] 정적 상태에서 커서 깜빡임 애니메이션 동작
- [ ] 키보드 입력 시 깜빡임 500ms 정지 후 재시작
- [ ] 마우스 클릭 시 깜빡임 리셋
- [ ] 선택 영역이 있을 때 커서 숨김

### 5.3 스크롤 연동
- [ ] 커서가 화면 밖으로 이동 시 자동 스크롤
- [ ] 위쪽 방향키로 화면 상단 밖 이동 시 스크롤
- [ ] 아래쪽 방향키로 화면 하단 밖 이동 시 스크롤

## 6. Debug Inspector 테스트

### 6.1 위치 및 표시
- [ ] Debug Inspector가 화면 우하단에 고정 표시
- [ ] 스크롤해도 Inspector 위치 고정됨
- [ ] 반투명 배경과 블러 효과 적용
- [ ] 적절한 크기와 폰트로 가독성 확보

### 6.2 정보 정확성 (확장된 디버그 정보)
- [ ] anchor position 정보 정확히 표시
- [ ] focus position 정보 정확히 표시
- [ ] 선택 상태(selectionActive) 정확히 표시
- [ ] 노드 타입(Text Node/Element Node) 정확히 표시
- [ ] offset 값 정확히 표시
- [ ] **Goal-X 좌표**: 상하 이동 시 목표 X 좌표 표시
- [ ] **드래그 상태**: isDragging 플래그 정확히 표시
- [ ] **커서 깜빡임**: isBlinking 상태 정확히 표시
- [ ] **선택 영역 박스**: selectionRects 배열의 각 박스 좌표 정확히 표시

## 7. 에지 케이스 테스트

### 7.1 빈 에디터
- [ ] 빈 에디터에서 클릭 시 적절한 위치에 커서 배치
- [ ] 빈 에디터에서 키보드 이동 시 에러 없음

### 7.2 경계 조건
- [ ] 에디터 맨 처음에서 왼쪽 화살표 시 이동 없음
- [ ] 에디터 맨 끝에서 오른쪽 화살표 시 이동 없음
- [ ] 첫 줄에서 위쪽 화살표 시 이동 없음
- [ ] 마지막 줄에서 아래쪽 화살표 시 이동 없음

### 7.3 연속 Atomic Component
- [ ] 연속된 멘션들 사이 네비게이션
- [ ] 멘션과 테이블이 연속으로 배치된 경우 네비게이션
- [ ] 줄 시작/끝이 atomic component인 경우

## 8. 성능 테스트

### 8.1 반응성
- [ ] 빠른 연속 클릭 시 정상 동작
- [ ] 빠른 연속 키 입력 시 정상 동작
- [ ] 긴 텍스트에서 스크롤 성능 확인

### 8.2 메모리 누수
- [ ] 장시간 사용 후 메모리 사용량 확인
- [ ] 개발자 도구에서 이벤트 리스너 누수 확인

## 9. 브라우저 호환성

### 9.1 Chrome
- [ ] 모든 기능 정상 동작
- [ ] 성능 이슈 없음

### 9.2 Safari
- [ ] 모든 기능 정상 동작
- [ ] Mac 특화 키보드 단축키 (Cmd) 정상 동작

### 9.3 Firefox
- [ ] 모든 기능 정상 동작
- [ ] document.caretPositionFromPoint 대신 caretRangeFromPoint 사용 시 정상 동작

## 10. 알고리즘 개선 전후 비교 테스트

### 10.1 상하 이동 알고리즘 개선 검증
- [ ] **h1, hr 마진 처리**: 큰 마진 요소 건너뛰기 개선 확인
- [ ] **테이블 높이 처리**: 큰 atomic component에서 아래 방향 이동 개선
- [ ] **라인 감지 정확성**: 복잡한 레이아웃에서 정확한 라인 인식
- [ ] **성능 최적화**: 전체 탐색 방식이지만 성능 저하 없음 확인
- [ ] **Goal-X 정밀도**: 이전 대비 더 정확한 Goal-X 기반 위치 선택

### 10.2 가로 이동 로직 통합 검증
- [ ] **moveHorizontally 함수**: 좌우 이동 로직 통합으로 일관성 확보
- [ ] **중복 코드 제거**: moveLeft/moveRight 함수 간소화
- [ ] **동작 일관성**: 좌우 이동의 모든 경우에서 동일한 로직 적용

### 10.3 회귀 테스트 체크리스트
- [ ] 이전 버전에서 동작하던 모든 기능이 여전히 동작
- [ ] 성능 저하 없음 (전체 탐색이지만 최적화됨)
- [ ] 새로운 콘솔 에러 없음
- [ ] 새로 추가된 기능이 기존 기능에 영향 없음
- [ ] 새 기능의 모든 시나리오 동작 확인

---

## 테스트 완료 확인

**테스트 실행자:** _______________  
**테스트 일자:** _______________  
**브라우저 버전:** _______________  
**통과/실패:** _______________  
**발견된 이슈:** _______________

---

*이 체크리스트는 Vibe Text Editor의 커서 및 텍스트 선택 기능에 대한 포괄적인 회귀 테스트를 보장합니다. 각 항목을 체크하여 품질을 확인하시기 바랍니다.*